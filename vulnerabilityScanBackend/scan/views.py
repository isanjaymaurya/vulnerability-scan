from django.shortcuts import render
from django.http import HttpResponse
import subprocess
# import os


def index(request):
    context = {

    }
    return render(request, 'index.html', context=context)


def scan(request):
    if request.method == 'POST':
        # print(os.getcwd())
        print("request >>> ", request.POST)
        output = subprocess.check_call(['python', "scan/listener.py", request.POST['ip'], request.POST['port']]).decode('utf-8') # shell=False, timeout=1800
        print("output >>> ", output)
        return HttpResponse(output, content_type='text/plain')